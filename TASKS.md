# Mini Dayz 逆向工程任务清单 (TASKS.md)

## 1. 核心需求 (Requirements)
*   **目标**: 逆向工程 Mini Dayz 1.6 网页版游戏，完全掌握模组制作能力。
*   **当前目标**: 实现物品生成功能，具体验证目标为在玩家位置生成一把“卡宾枪” (Carbine, Item ID: `t148`)。
*   **最终产出**: 包含修改后的游戏代码及一份完整的模组制作指南。

## 2. 任务进展 (Current Progress)
*   **[已完成] 环境搭建**: 成功运行本地服务器并加载游戏。
*   **[已完成] 运行时分析**:
    *   成功获取 Construct 2 运行时 (`window.cr_getC2Runtime()`)。
    *   发现游戏代码经过混淆，标准属性 `types_by_index` 被移除。
    *   确认替代属性为 `runtime.types` (Object Map)。
*   **[已完成] 数据解析**:
    *   解析 `data.js` 成功提取出所有对象名称与内部ID的映射关系。
    *   确认 "Carbine" (卡宾枪) 对应的内部对象名为 `t148`。
*   **[进行中] 脚本验证**:
    *   编写了 `test_s.js` 用于注入游戏并生成物品。
    *   解决了因混淆导致的 `undefined` 错误，采用了更稳健的查找策略。
    *   目前脚本已准备好进行最终验证。

## 3. 代码清单与作用 (File Inventory)

### `inspect_data.py`
*   **类型**: Python 辅助脚本
*   **作用**: 用于解析游戏数据文件 `data.js`。
*   **逻辑**: 读取 `data.js` 中的 JSON 结构，提取出所有 `c2array` 或对象定义，并打印出其名称 (Name) 和索引/ID。
*   **成果**: 帮助我们找到了卡宾枪对应的是 `t148`。

### `full_output.txt`
*   **类型**: 数据转储文件 (Output Log)
*   **作用**: `inspect_data.py` 运行后的完整输出结果。
*   **内容**: 包含游戏内成百上千个对象的列表。是查找任何物品 ID（如 AK-47, 食物, 僵尸等）的字典。
*   **用法**: 当需要生成新物品时，在此文件中搜索物品英文名称，即可找到对应的 `tXXX` ID。

### `test_s.js`
*   **类型**: JavaScript 注入脚本 (Payload)
*   **作用**: 核心测试脚本，用于在浏览器控制台执行以修改游戏状态。
*   **功能**:
    1.  获取 C2 运行时实例。
    2.  智能查找玩家对象 (Player) 的位置。
    3.  从 `runtime.types` 映射中查找物品对象 (`t148`)。
    4.  调用 `createInstance` (或暴力搜索对应函数) 在游戏内生成实体。
